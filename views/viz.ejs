<html>
<head>

<script>

//   console.log("running file")
//   var http = new XMLHttpRequest();
//
//   http.onreadystatechange = function(){
//     if(http.readyStatic==4 &&http.status ==200){
//       document.body.appendchild(http.response)
//     }
//   }
//   http.open("GET", "../temp_res/test.png",true);
//   http.send();
//
// }
</script>
<script src="../../viz.js"></script>

</head>

<body>

<h1>Yurt! You have requested to visualise <%=num_block%> blocks starting at <%=block_num %> with Graphviz!</h1>

<br>
<!-- <h2>Here is the graph format</h2>
<% graph_formats.forEach(function(graph){%>
  <a> <%=graph.toString() %></a> <%
})
%> -->

<div id = "mynetwork"></div>

<script>
//this is working
console.log("script loaded")
<% graph_formats.forEach(function(mem,i){%>
    console.log("index is "+<%=i%>);
    var g = <%- JSON.stringify(mem)%>
    console.log("g is " + g)
    var gcut = g.slice(1,(g.length-3));
    console.log("gcut is " + gcut)
    //comment the below line in for graphviz
    document.body.innerHTML += Viz(gcut,{totalMemory:67108864}); //returns in svg format! will do multigraph generation

<%});%>

</script>





</body>






</html>
